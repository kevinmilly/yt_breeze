<div class="container">

  <header>
    <h1>YT Breeze</h1>
    <button class="mode-btn" (click)="toggleMode()">
      {{ mode() === 'light' ? 'üåô Dark' : '‚òÄÔ∏è Light' }}
    </button>
  </header>

  <h2>YouTube Content Cleaner</h2>
  <p>Paste a YouTube link. Get bottom line, key points, fluff rating, and clickbait score.</p>

  <label>YouTube URL</label>
  <input 
    [ngModel]="youtubeUrl()"
    (ngModelChange)="youtubeUrl.set($event)"
    placeholder="https://youtube.com/watch?v=..."
  />

  <label>Optional: Your OpenAI API Key</label>
  <input 
    type="password"
    [ngModel]="userApiKey()"
    (ngModelChange)="userApiKey.set($event)"
    placeholder="sk-..."
  />

  <button (click)="submit()" [disabled]="loading()">
    @if (loading()) { <span class="spinner"></span> Processing... }
    @else { Summarize Video }
  </button>

  @if (result()) {
    <div class="output">

      <h3>Bottom Line</h3>
      <p>{{ result().bottom_line }}</p>
      <button class="copy-btn" (click)="copy(result().bottom_line)">Copy</button>

      <h3>Key Points</h3>
      <ul>
        @for (point of result().key_points; track point) {
          <li>{{ point }}</li>
        }
      </ul>

      <h3>Fluff Level</h3>
      <p>{{ result().fluff_level.score }}/100 ‚Äî {{ result().fluff_level.summary }}</p>

      <h3>Clickbait Accuracy</h3>
      <p>{{ result().clickbait_accuracy.explanation }}</p>

      <h3>Better Title</h3>
      <p>{{ result().better_title }}</p>
    </div>
  }
</div>
